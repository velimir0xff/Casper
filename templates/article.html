{% extends "base.html" %}
{% block header_title %}{% endblock %}
{% block header_image %}{% if article.image %}{{ article.image }}{% endif %}{% endblock %}
{% block canonical %}
    <link rel="canonical" href="{{ SITEURL }}/{{ article.url }}" />
{% endblock canonical %}
{% block metas %}
    {% for tag in article.og_tags %}
        <meta property="{{tag[0]}}" content="{{tag[1]|striptags|e}}" />
    {% endfor %}
    {% for tag in article.twitter_tags %}
        <meta name="{{tag[0]}}" content="{{tag[1]|striptags|e}}" />
    {% endfor %}
    {% for tag in article.meta_tags %}
        <meta name="{{tag[0]}}" content="{{tag[1]|striptags|e}}" />
    {% endfor %}
{% endblock metas %}
{% block scroll %}{% endblock %}
{% block template_type %}post-template{% endblock %}
{% block content %}
<main id="content" class="content" role="main">
    <article class="post" itemscope="" itemtype="http://schema.org/BlogPosting" itemprop="blogPost">
        <header class="post-header">
            <h1 class="post-title" itemprop="headline">{{ article.title|striptags }}</h1>
            <section class="post-meta">
                <time class="post-date" itemprop="datePublished" datetime="{{ article.date|strftime('%YYYY-%MM-%DD') }}">{{ article.date|strftime('%A, %B %d, %Y') }}</time>
                on {% for tag in article.tags %}<a href="{{ tag.url }}">{{ tag.name | title }}{% if not loop.last %}, {% endif %}</a>{% endfor %}
            </section>
        </header>
        <section class="post-content">
            {{ article.content }}
        </section>
        <footer class="post-footer">
            <figure class="author-image">
                <a class="img" href="{{ article.author.url }}" style="background-image: url('/{{ article.author.picture }}')">
                    <span class="hidden">{{ article.author }}'s Picture</span>
                </a>
            </figure>
            <section class="author">
                <h4>
                    <a href="{{ article.author.url }}">{{ article.author.name }}</a>
                </h4>
                <p>{{ article.author.bio }}</p>
                <div class="author-meta">
                    {% if article.location %}
                        {% set location = article.location %}
                    {% else %}
                        {% set location = article.author.location %}
                    {% endif %}

                    <span class="author-location icon-location">{{ location }}</span>
                    {% if article.author.url %}
                        <span class="author-link icon-link">
                            <a href="{{ article.author.url }}">{{ article.author.name }}</a>
                        </span>
                    {% endif %}
                </div>
            </section>
            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="https://twitter.com/share?text={{ article.title | urlencode | replace(' ', '%20') | truncate(60) }}{{ ' via @' | urlencode }}{{ TWITTER_USERNAME }}&amp;url={{ SITEURL }}/{{ article.url }}" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u={{ SITEURL }}/{{ article.url }}" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url={{ SITEURL }}/{{ article.url }}" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>
        </footer>
    </article>
</main>
{% include 'comments.html' %}
{% include 'neighbors.html' %}
{% endblock %}
